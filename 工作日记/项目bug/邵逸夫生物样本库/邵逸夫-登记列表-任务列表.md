# 邵逸夫-登记列表-任务列表7.10

任务完成后显示未完成

```sql
# 查看主表
SELECT * FROM bio_task WHERE task_id = "xxx";

# 查看从表
SELECT * FROM bio_task_info WHERE task_id = "xxx";

SELECT check_status, COUNT(1) FROM bio_task_info WHERE task_id = "xxx" AND del_flag = 0 GROUP BY check_status;

# 选看
SELECT * FROM bio_task_record WHERE task_id = "xxx";

SELECT COUNT(1) FROM bio_task_record WHERE task_id = "xxx";

# 检验是否为老数据
SELECT create_time FROM bio_donor_info WHERE id in (SELECT donor_id FROM bio_task_info WHERE task_id = "xxx" GROUP BY donor_id);

```

```sql
UPDATE bio_task SET complete_num = xx, task_status = 1 WHERE task_id = "xxx";
```

# 邵逸夫-前、后清场内容修改7.11

```sql
SELECT COUNT(1) FROM bio_preparation_environ_record;

SELECT environ_confim_name, COUNT(1) FROM bio_preparation_environ_record GROUP BY environ_confim_name;

SELECT environ_confim_type, environ_confim_name, COUNT( 1 ) AS name_count FROM bio_preparation_environ_record GROUP BY environ_confim_name, environ_confim_type;

-- 前清场

UPDATE bio_preparation_environ_record SET environ_confim_name = "确认环境安全，符合制备要求" WHERE environ_confim_name = "工作区域内不能存在与该工序不相关的物料、记录、文件等" AND environ_confim_type = "1";

UPDATE bio_preparation_environ_record SET environ_confim_name = "清理工作区域内不相关的物料、记录、文件等" WHERE environ_confim_name = "设备，工作台面，地面清洁" AND environ_confim_type = "1";


UPDATE bio_preparation_environ_record SET environ_confim_name = "员工防护装备佩戴齐全正确，工作台面、地面确认清洁" WHERE environ_confim_name = "与该分装工序无关的物品归位" AND environ_confim_type = "1";


UPDATE bio_preparation_environ_record SET environ_confim_name = "各仪器设备准备就绪，运行状态正常" WHERE environ_confim_name = "上次工序的后清场消毒在有效期内，若不在有效期内，对相应区域进行清洁消毒后开始下一工序" AND environ_confim_type = "1";

-- 后清场

UPDATE bio_preparation_environ_record SET environ_confim_name = "清理生物安全柜或自动液体分装工作站，耗材、工具归位" WHERE environ_confim_name = "工作区域内不能存在与该工序不相关的物料、记录、文件等" AND environ_confim_type = "2";

UPDATE bio_preparation_environ_record SET environ_confim_name = "收集制备后废弃物并按要求丢入黄色垃圾袋" WHERE environ_confim_name = "设备，工作台面，地面清洁" AND environ_confim_type = "2";


UPDATE bio_preparation_environ_record SET environ_confim_name = "关闭仪器设备，退出样本库管理系统" WHERE environ_confim_name = "与该分装工序无关的物品归位" AND environ_confim_type = "2";


UPDATE bio_preparation_environ_record SET environ_confim_name = "对生物安全柜、自动液体分装工作站和工作台面进行清洁消毒" WHERE environ_confim_name = "上次工序的后清场消毒在有效期内，若不在有效期内，对相应区域进行清洁消毒后开始下一工序" AND environ_confim_type = "2";
```

