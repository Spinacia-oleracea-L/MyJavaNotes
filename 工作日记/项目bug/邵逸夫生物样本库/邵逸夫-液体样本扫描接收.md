# 2024-09-13 10:27:49邵逸夫线上-液体样本扫描接收-电子工单标注表重复

```bash
2024-09-13 09:26:14,537 [XNIO-1 task-7] INFO  [c.g.b.s.service.impl.AdviceRecordServiceImpl] AdviceRecordServiceImpl.java:1064 - [医嘱接收信息查询]: Start
2024-09-13 09:26:14,538 [XNIO-1 task-7] INFO  [c.g.b.surgical.service.impl.HospitalWebServiceImpl] HospitalWebServiceImpl.java:506 - [医嘱条码查询接口请求]: Start
2024-09-13 09:26:14,539 [XNIO-1 task-7] INFO  [c.g.b.s.webservice.request.WebServiceClientUtil] WebServiceClientUtil.java:20 - [webservice请求报文]: <?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><query xmlns="http://www.joinhealth.cn"><inputStr>&lt;root&gt;&lt;interface&gt;&lt;code&gt;YBK010&lt;/code&gt;&lt;method&gt;&#25509;&#21475;&#26041;&#27861;&lt;/method&gt;&lt;/interface&gt;&lt;param&gt;&lt;barcode&gt;142409122130&lt;/barcode&gt;&lt;/param&gt;&lt;/root&gt;</inputStr></query></soap:Body></soap:Envelope>
2024-09-13 09:26:14,650 [XNIO-1 task-7] INFO  [c.g.b.s.webservice.request.WebServiceClientUtil] WebServiceClientUtil.java:31 - [webservice请求返回转译]: <?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><queryResponse xmlns="http://www.joinhealth.cn"><queryResult><root><retInfo><code>1</code><name>查询成功</name></retInfo><msg>﻿<row><mrn>10386664</mrn><series>5</series><orderno>1194981420</orderno><hoscode>A001</hoscode><hosname>庆春院区</hosname><deptin>5022</deptin><deptinName>生物样本库</deptinName><etext>[术前]生物样本血液-紫盖长管1</etext><ecode>LAB66.FZSW1Z1</ecode><orderflag>L66</orderflag><orderflagName>分子病理检查（生物样本库）</orderflagName><sdr>30315</sdr><sdrName>肖贵洲</sdrName><empid_gdgh>790414                        </empid_gdgh><empid_gdghName>陈瑛</empid_gdghName><sdate>2024-09-12 16:55:37</sdate><duration>14</duration><expiredate /><orderstatus /><blitem>[术前]生物样本血液-紫盖长管1</blitem><empid_nurse_date>2024-09-13 08:36:00</empid_nurse_date><pdiagnose>甲状腺结节</pdiagnose><date_ltsj>2024-09-13 08:36:00</date_ltsj><date_gdsj>2024-09-13 08:36:00</date_gdsj><sjbw>紫盖长管1</sjbw><operName>单侧甲状腺切除伴甲状腺峡部切除术左侧+功能性颈淋巴结清扫术左侧+单侧甲状腺部分切除术右侧</operName><operDr>肖贵洲</operDr><operSD>2024-09-13 08:25:27</operSD><operED /><Atype>麻醉会诊</Atype><Adr /><bz /><inVitroTime /><allocationTime /><transferBy /><serialNum>5</serialNum></row></msg></root></queryResult></queryResponse></soap:Body></soap:Envelope>
2024-09-13 09:26:14,651 [XNIO-1 task-7] INFO  [c.g.b.surgical.service.impl.HospitalWebServiceImpl] HospitalWebServiceImpl.java:541 - [医嘱条码查询接口请求返回]:<root><retInfo><code>1</code><name>查询成功</name></retInfo><msg>﻿<row><mrn>10386664</mrn><series>5</series><orderno>1194981420</orderno><hoscode>A001</hoscode><hosname>庆春院区</hosname><deptin>5022</deptin><deptinName>生物样本库</deptinName><etext>[术前]生物样本血液-紫盖长管1</etext><ecode>LAB66.FZSW1Z1</ecode><orderflag>L66</orderflag><orderflagName>分子病理检查（生物样本库）</orderflagName><sdr>30315</sdr><sdrName>肖贵洲</sdrName><empid_gdgh>790414                        </empid_gdgh><empid_gdghName>陈瑛</empid_gdghName><sdate>2024-09-12 16:55:37</sdate><duration>14</duration><expiredate /><orderstatus /><blitem>[术前]生物样本血液-紫盖长管1</blitem><empid_nurse_date>2024-09-13 08:36:00</empid_nurse_date><pdiagnose>甲状腺结节</pdiagnose><date_ltsj>2024-09-13 08:36:00</date_ltsj><date_gdsj>2024-09-13 08:36:00</date_gdsj><sjbw>紫盖长管1</sjbw><operName>单侧甲状腺切除伴甲状腺峡部切除术左侧+功能性颈淋巴结清扫术左侧+单侧甲状腺部分切除术右侧</operName><operDr>肖贵洲</operDr><operSD>2024-09-13 08:25:27</operSD><operED /><Atype>麻醉会诊</Atype><Adr /><bz /><inVitroTime /><allocationTime /><transferBy /><serialNum>5</serialNum></row></msg></root>
2024-09-13 09:26:14,659 [XNIO-1 task-7] INFO  [c.g.b.surgical.service.impl.HospitalWebServiceImpl] HospitalWebServiceImpl.java:545 - [医嘱条码查询接口请求]: End
2024-09-13 09:26:14,660 [XNIO-1 task-7] INFO  [c.g.b.s.service.impl.AdviceRecordServiceImpl] AdviceRecordServiceImpl.java:1068 - [医嘱接收信息查询]: {"advInfoRespMsg":{"advInfoRespRow":{"adr":"","allocationTime":"","atype":"麻醉会诊","blitem":"[术前]生物样本血液-紫盖长管1","bz":"","date_gdsj":"2024-09-13 08:36:00","date_ltsj":"2024-09-13 08:36:00","deptin":"5022","deptinName":"生物样本库","duration":"14","ecode":"LAB66.FZSW1Z1","empid_gdgh":"790414                        ","empid_gdghName":"陈瑛","etext":"[术前]生物样本血液-紫盖长管1","expiredate":"","hoscode":"A001","hosname":"庆春院区","inVitroTime":"","mrn":"10386664","operDr":"肖贵洲","operED":"","operName":"单侧甲状腺切除伴甲状腺峡部切除术左侧+功能性颈淋巴结清扫术左侧+单侧甲状腺部分切除术右侧","operSD":"2024-09-13 08:25:27","orderflag":"L66","orderflagName":"分子病理检查（生物样本库）","orderno":"1194981420","pdiagnose":"甲状腺结节","sdate":"2024-09-12 16:55:37","sdr":"30315","sdrName":"肖贵洲","serialNum":"5","series":5,"sjbw":"紫盖长管1","transferBy":""}},"retInfo":{"code":"1","name":"查询成功"}}
2024-09-13 09:26:14,662 [XNIO-1 task-7] DEBUG [c.g.b.s.mapper.ConfigAdviceTypeMapper.selectList] BaseJdbcLogger.java:143 - ==>  Preparing: SELECT id, advice_code, advice_content, expiry_date, create_time, create_by, update_time, update_by, del_flag, dept_id, site, sort FROM config_advice_type WHERE (del_flag = ?) 
2024-09-13 09:26:14,663 [XNIO-1 task-7] DEBUG [c.g.b.s.mapper.ConfigAdviceTypeMapper.selectList] BaseJdbcLogger.java:143 - ==> Parameters: 0(String)
2024-09-13 09:26:14,664 [XNIO-1 task-7] DEBUG [c.g.b.s.mapper.ConfigAdviceTypeMapper.selectList] BaseJdbcLogger.java:143 - <==      Total: 19
2024-09-13 09:26:14,666 [XNIO-1 task-7] DEBUG [c.g.b.s.mapper.AdviceRecordMapper.selectAdvice] BaseJdbcLogger.java:143 - ==>  Preparing: SELECT t1.id AS id, t1.temp_id AS tempId, t1.order_no AS orderNo, t1.order_flag AS orderFlag, t1.order_flag_name AS orderFlagName, t1.hoscode AS hoscode, t1.hosname AS hosname, t1.deptin AS deptin, t1.deptin_name AS deptinName, t1.mrn AS mrn, t1.adv_type AS advType, t1.adv_code AS advCode, t1.adv_content AS advContent, t1.valid_day AS validDay, t1.start_time AS startTime, t1.end_time AS endTime, t1.revice_time AS reviceTime, t1.advice_status AS adviceStatus, t1.series AS series, t1.cb_num AS cbNum, t1.sdr_name AS sdrName, t1.ct_name AS ctName, t1.bar_code AS barCode, t1.pdiagnose AS pdiagnose, t1.date_ltsj AS dateLtsj, t1.remark AS remark, t1.create_time AS createTime, t1.create_by AS createBy, t1.update_time AS updateTime, t1.update_by AS updateBy, t1.del_flag AS delFlag, t1.dept_id, t1.patient_name AS patientName, t1.tysdm AS tysdm, t1.research_project_id AS researchProjectId, project.project_name AS researchProjectName, t1.patient_uid AS patientUid, t1.shutdown_reason AS shutdownReason, t2.remark_type AS remarkType FROM surgical_advice_record t1 LEFT JOIN bio_research_project project ON project.id = t1.research_project_id LEFT JOIN surgical_temp_order_remark t2 ON t1.temp_id = t2.temp_id WHERE t1.del_flag = '0' AND t1.order_no = ? AND t1.mrn = ? AND t1.order_flag = ? AND t1.hoscode = ? 
2024-09-13 09:26:14,667 [XNIO-1 task-7] DEBUG [c.g.b.s.mapper.AdviceRecordMapper.selectAdvice] BaseJdbcLogger.java:143 - ==> Parameters: 1194981420(String), 10386664(String), L66(String), A001(String)
2024-09-13 09:26:14,669 [XNIO-1 task-7] DEBUG [c.g.b.s.mapper.AdviceRecordMapper.selectAdvice] BaseJdbcLogger.java:143 - <==      Total: 2
2024-09-13 09:26:14,670 [XNIO-1 task-7] ERROR [c.g.b.c.s.component.GlobalExceptionHandlerResolver] GlobalExceptionHandlerResolver.java:63 - 全局异常信息 ex=nested exception is org.apache.ibatis.exceptions.TooManyResultsException: Expected one result (or null) to be returned by selectOne(), but found: 2
org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.TooManyResultsException: Expected one result (or null) to be returned by selectOne(), but found: 2
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy197.selectOne(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectOne(SqlSessionTemplate.java:159)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:108)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy236.selectAdvice(Unknown Source)
	at com.gy.biobank.surgical.service.impl.AdviceRecordServiceImpl.queryTransmitInfo(AdviceRecordServiceImpl.java:1100)
	at com.gy.biobank.surgical.service.impl.AdviceRecordServiceImpl$$FastClassBySpringCGLIB$$2cb1abf0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at com.gy.biobank.surgical.service.impl.AdviceRecordServiceImpl$$EnhancerBySpringCGLIB$$21f94eeb.queryTransmitInfo(<generated>)
	at com.gy.biobank.surgical.controller.AdviceRecordController.queryTransmitInfo(AdviceRecordController.java:288)
	at com.gy.biobank.surgical.controller.AdviceRecordController$$FastClassBySpringCGLIB$$19fb4f3e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at com.gy.biobank.surgical.controller.AdviceRecordController$$EnhancerBySpringCGLIB$$7dd135c.queryTransmitInfo(<generated>)
	at sun.reflect.GeneratedMethodAccessor1312.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:888)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:503)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)
	at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:118)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:158)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter.doFilter(OAuth2AuthenticationProcessingFilter.java:176)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
	at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
	at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
	at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:108)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
	at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
	at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
	at com.gy.biobank.common.data.tenant.TenantContextHolderFilter.doFilter(TenantContextHolderFilter.java:59)
	at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
	at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
	at io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)
	at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)
	at io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)
	at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)
	at io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68)
	at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:132)
	at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)
	at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)
	at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)
	at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)
	at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:269)
	at io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:78)
	at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:133)
	at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:130)
	at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)
	at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)
	at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:249)
	at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:78)
	at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:99)
	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:376)
	at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:830)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.ibatis.exceptions.TooManyResultsException: Expected one result (or null) to be returned by selectOne(), but found: 2
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession.java:80)
	at sun.reflect.GeneratedMethodAccessor479.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 126 common frames omitted
```

```sql
SELECT t1.id AS id, t1.temp_id AS tempId, t1.order_no AS orderNo, t1.order_flag AS orderFlag, t1.order_flag_name AS orderFlagName, t1.hoscode AS hoscode, t1.hosname AS hosname, t1.deptin AS deptin, t1.deptin_name AS deptinName, t1.mrn AS mrn, t1.adv_type AS advType, t1.adv_code AS advCode, t1.adv_content AS advContent, t1.valid_day AS validDay, t1.start_time AS startTime, t1.end_time AS endTime, t1.revice_time AS reviceTime, t1.advice_status AS adviceStatus, t1.series AS series, t1.cb_num AS cbNum, t1.sdr_name AS sdrName, t1.ct_name AS ctName, t1.bar_code AS barCode, t1.pdiagnose AS pdiagnose, t1.date_ltsj AS dateLtsj, t1.remark AS remark, t1.create_time AS createTime, t1.create_by AS createBy, t1.update_time AS updateTime, t1.update_by AS updateBy, t1.del_flag AS delFlag, t1.dept_id, t1.patient_name AS patientName, t1.tysdm AS tysdm, t1.research_project_id AS researchProjectId, project.project_name AS researchProjectName, t1.patient_uid AS patientUid, t1.shutdown_reason AS shutdownReason, t2.remark_type AS remarkType FROM surgical_advice_record t1 LEFT JOIN bio_research_project project ON project.id = t1.research_project_id LEFT JOIN surgical_temp_order_remark t2 ON t1.temp_id = t2.temp_id WHERE t1.del_flag = '0' AND t1.order_no = 1194981420 AND t1.mrn = 10386664 AND t1.order_flag = 'L66' AND t1.hoscode = 'A001';


SELECT * FROM surgical_advice_record WHERE id = 886656651665342465;

SELECT * FROM surgical_advice_record AS t1 WHERE t1.del_flag = '0' AND t1.order_no = 1194981420 AND t1.mrn = 10386664 AND t1.order_flag = 'L66' AND t1.hoscode = 'A001';

SELECT * FROM surgical_advice_record AS t1 LEFT JOIN surgical_temp_order_remark t2 ON t1.temp_id = t2.temp_id WHERE t1.del_flag = '0' AND t1.order_no = 1194981420 AND t1.mrn = 10386664 AND t1.order_flag = 'L66' AND t1.hoscode = 'A001';

SELECT * FROM surgical_temp_order_remark WHERE temp_id = '1834110783089377282';


DELETE FROM surgical_temp_order_remark WHERE id = '1834153961024749570';
```

# 2024-09-16 15:27:49中秋节内-新样本制备-组织制备-异常制备无法结束制备、取消制备报错

```bash
### The error may exist in class path resource [mapper/PreparatSampleMapper.xml]
### The error may involve com.gy.biobank.collect.mapper.PreparatSampleMapper.updateSampleStatusByPreparatSampleId
### The error occurred while executing an update
### Cause: com.baomidou.mybatisplus.core.exceptions.MybatisPlusException: Failed to process, please exclude the tableName or statementId.
 Error SQL: UPDATE bio_preparat_sample
		SET
		 
			collect_sample_status=?,
		 
		 
		 
		update_by=?,
		update_time=?
		WHERE id IN
org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.PersistenceException: 
### Error updating database.  Cause: com.baomidou.mybatisplus.core.exceptions.MybatisPlusException: Failed to process, please exclude the tableName or statementId.
 Error SQL: UPDATE bio_preparat_sample
		SET
		 
			collect_sample_status=?,
		 
		 
		 
		update_by=?,
		update_time=?
		WHERE id IN
### The error may exist in class path resource [mapper/PreparatSampleMapper.xml]
### The error may involve com.gy.biobank.collect.mapper.PreparatSampleMapper.updateSampleStatusByPreparatSampleId
### The error occurred while executing an update
### Cause: com.baomidou.mybatisplus.core.exceptions.MybatisPlusException: Failed to process, please exclude the tableName or statementId.
 Error SQL: UPDATE bio_preparat_sample
		SET
		 
			collect_sample_status=?,
		 
		 
		 
		update_by=?,
		update_time=?
		WHERE id IN
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy216.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:65)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:96)
	at com.sun.proxy.$Proxy247.updateSampleStatusByPreparatSampleId(Unknown Source)
	at com.gy.biobank.collect.service.impl.PreparatSampleServiceImpl.updatePreparatSampleStatus(PreparatSampleServiceImpl.java:1626)
	at com.gy.biobank.collect.service.impl.PreparatSampleServiceImpl$$FastClassBySpringCGLIB$$a6a71202.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:366)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:99)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at com.codingapi.tx.aop.service.impl.TxRunningTransactionServerImpl.execute(TxRunningTransactionServerImpl.java:62)
	at com.codingapi.tx.aop.service.impl.AspectBeforeServiceImpl.around(AspectBeforeServiceImpl.java:52)
	at com.gy.biobank.common.transaction.tx.springcloud.interceptor.TxManagerInterceptor.around(TxManagerInterceptor.java:55)
	at com.gy.biobank.common.transaction.tx.springcloud.interceptor.TransactionAspect.transactionRunning(TransactionAspect.java:49)
	at sun.reflect.GeneratedMethodAccessor1463.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at com.gy.biobank.collect.service.impl.PreparatSampleServiceImpl$$EnhancerBySpringCGLIB$$11f3e641.updatePreparatSampleStatus(<generated>)
	at com.gy.biobank.collect.controller.PreparatSampleController.updatePreparatSampleStatus(PreparatSampleController.java:951)
	at com.gy.biobank.collect.controller.PreparatSampleController$$FastClassBySpringCGLIB$$9a4972ac.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
	at com.gy.biobank.common.security.component.BiobankSecurityInnerAspect.around(BiobankSecurityInnerAspect.java:53)
	at sun.reflect.GeneratedMethodAccessor2363.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
	at com.gy.biobank.collect.controller.PreparatSampleController$$EnhancerBySpringCGLIB$$333d123.updatePreparatSampleStatus(<generated>)
	at sun.reflect.GeneratedMethodAccessor3590.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:888)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:523)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)
	at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:118)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:158)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter.doFilter(OAuth2AuthenticationProcessingFilter.java:176)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
	at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
	at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
	at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:108)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
	at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
	at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
	at com.gy.biobank.common.data.tenant.TenantContextHolderFilter.doFilter(TenantContextHolderFilter.java:59)
	at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
	at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
	at io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)
	at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)
	at io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)
	at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)
	at io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68)
	at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:132)
	at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)
	at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)
	at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)
	at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)
	at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:269)
	at io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:78)
	at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:133)
	at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:130)
	at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)
	at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)
	at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:249)
	at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:78)
	at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:99)
	at io.undertow.server.Connectors.executeRootHandler(Connectors.java:376)
	at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:830)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)

```

```sql
select * from bio_preparation_order where id = '888069500115615744';


select * from bio_preparation_init_record where preparation_order_id = '888069500115615744';

select * from bio_preparation_record where preparation_order_id = '888069500115615744';


select * from bio_preparation_sample_record where preparation_order_id = '888069500115615744';


```

http://20.21.2.61/preparat/preparationOrder/queryPreparationOrder?preparationOrderId=888069500115615744

http://20.21.2.61/preparat/preparationOrder/cancelPreparationOrder?preparationOrderId=888069500115615744

```bash
mysql> select * from bio_preparation_init_record where preparation_order_id = '888069500115615744';
+--------------------+----------------------+-----------------------+-------------------+-------------------+----------------+------------------+------------------+--------+-------------+-----------+------------------+-----------------------+--------------------+-----------+-----------+---------------------+-----------+---------------------+----------+---------+
| id                 | preparation_order_id | preparation_record_id | storage_type_code | storage_type_name | sample_type_id | sample_type_code | sample_type_name | volume | volume_unit | split_num | centrifugal_once | centrifugal_secondary | sample_id          | use_state | create_by | create_time         | update_by | update_time         | del_flag | dept_id |
+--------------------+----------------------+-----------------------+-------------------+-------------------+----------------+------------------+------------------+--------+-------------+-----------+------------------+-----------------------+--------------------+-----------+-----------+---------------------+-----------+---------------------+----------+---------+
| 888069538455748608 | 888069500115615744   | 888069518994178048    | N                 | 液氮速冻          | 43             | T                | 肿瘤组织         | 30.0   | mg          |         2 | NULL             | NULL                  | 888069428594343936 | 0         | 95193     | 2024-09-16 14:31:18 | 95193     | 2024-09-16 14:33:09 | 1        |       7 |
| 888069538455748609 | 888069500115615744   | 888069518994178048    | N                 | 液氮速冻          | 44             | P                | 肿瘤旁组织       | 30.0   | mg          |         2 | NULL             | NULL                  | 888069428594343936 | 0         | 95193     | 2024-09-16 14:31:18 | 95193     | 2024-09-16 14:33:09 | 1        |       7 |
| 888069538459942912 | 888069500115615744   | 888069518994178048    | N                 | 液氮速冻          | 45             | N                | 正常组织         | 30.0   | mg          |         2 | NULL             | NULL                  | 888069428594343936 | 0         | 95193     | 2024-09-16 14:31:18 | 95193     | 2024-09-16 14:33:09 | 1        |       7 |
| 888069538527051776 | 888069500115615744   | 888069518994178048    | N                 | 液氮速冻          | 43             | T                | 肿瘤组织         | 30.0   | mg          |         2 | NULL             | NULL                  | 888069428594343936 | 0         | 95193     | 2024-09-16 14:31:18 | 95193     | 2024-09-16 14:33:09 | 1        |       7 |
| 888069538531246080 | 888069500115615744   | 888069518994178048    | N                 | 液氮速冻          | 44             | P                | 肿瘤旁组织       | 30.0   | mg          |         2 | NULL             | NULL                  | 888069428594343936 | 0         | 95193     | 2024-09-16 14:31:18 | 95193     | 2024-09-16 14:33:09 | 1        |       7 |
| 888069538531246081 | 888069500115615744   | 888069518994178048    | N                 | 液氮速冻          | 45             | N                | 正常组织         | 30.0   | mg          |         2 | NULL             | NULL                  | 888069428594343936 | 0         | 95193     | 2024-09-16 14:31:18 | 95193     | 2024-09-16 14:33:09 | 1        |       7 |
+--------------------+----------------------+-----------------------+-------------------+-------------------+----------------+------------------+------------------+--------+-------------+-----------+------------------+-----------------------+--------------------+-----------+-----------+---------------------+-----------+---------------------+----------+---------+
6 rows in set (0.03 sec)



mysql> select * from bio_preparation_order where id = '888069500115615744';
+--------------------+-------------+-----------------------+----------------+---------------------+--------------+----------+---------------------+-------------+---------------+--------+-----------+---------------------+-----------+---------------------+----------+---------+
| id                 | record_type | preparation_no        | preparation_by | start_time          | confirm_time | check_by | check_time          | reviewed_by | reviewed_time | status | create_by | create_time         | update_by | update_time         | del_flag | dept_id |
+--------------------+-------------+-----------------------+----------------+---------------------+--------------+----------+---------------------+-------------+---------------+--------+-----------+---------------------+-----------+---------------------+----------+---------+
| 888069500115615744 | tissue      | ZBPH20240916143107451 | 王晶           | 2024-09-16 14:31:08 | NULL         | 王晶     | 2024-09-16 14:29:45 | NULL        | NULL          | 1      | 95193     | 2024-09-16 14:31:08 | 95193     | 2024-09-16 14:31:08 | 0        |       7 |
+--------------------+-------------+-----------------------+----------------+---------------------+--------------+----------+---------------------+-------------+---------------+--------+-----------+---------------------+-----------+---------------------+----------+---------+
1 row in set (0.00 sec)



mysql> select * from bio_preparation_record where preparation_order_id = '888069500115615744';
+--------------------+----------------------+----------------+------------------+------------------+------+-------+-----------+---------------------+---------------------+-----------+---------+----------+
| id                 | preparation_order_id | sample_type_id | sample_type_code | sample_type_name | node | state | create_by | create_time         | update_time         | update_by | dept_id | del_flag |
+--------------------+----------------------+----------------+------------------+------------------+------+-------+-----------+---------------------+---------------------+-----------+---------+----------+
| 888069518994178048 | 888069500115615744   | NULL           | NULL             | NULL             | 2    | 0     | 95193     | 2024-09-16 14:31:13 | 2024-09-16 17:13:30 | 75071     |       7 | 0        |
+--------------------+----------------------+----------------+------------------+------------------+------+-------+-----------+---------------------+---------------------+-----------+---------+----------+
1 row in set (0.00 sec)

mysql> select * from bio_preparation_sample_record where preparation_order_id = '888069500115615744';
+--------------------+----------------------+-----------------------+--------------------+-----------+---------------------+-----------+---------------------+----------+---------+
| id                 | preparation_order_id | preparation_record_id | sample_id          | create_by | create_time         | update_by | update_time         | del_flag | dept_id |
+--------------------+----------------------+-----------------------+--------------------+-----------+---------------------+-----------+---------------------+----------+---------+
| 888069519157755904 | 888069500115615744   | 888069518994178048    | 888069428594343936 | 95193     | 2024-09-16 14:31:13 | 95193     | 2024-09-16 14:31:13 | 0        |       7 |
| 888069965708525568 | 888069500115615744   | 888069518994178048    | 888069428594343936 | 95193     | 2024-09-16 14:32:59 | 95193     | 2024-09-16 14:32:59 | 0        |       7 |
+--------------------+----------------------+-----------------------+--------------------+-----------+---------------------+-----------+---------------------+----------+---------+
2 rows in set (0.01 sec)

mysql> UPDATE bio_preparation_init_record SET del_flag = '0' WHERE preparation_order_id = '888069500115615744';
Query OK, 6 rows affected (0.06 sec)
Rows matched: 6  Changed: 6  Warnings: 0

mysql> UPDATE bio_preparation_record SET node = 1 WHERE id = '888069518994178048';
Query OK, 1 row affected (0.03 sec)
Rows matched: 1  Changed: 1  Warnings: 0

```

