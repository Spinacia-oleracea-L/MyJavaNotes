# 第一周

## 7.01 周一 阴转中雨

### TODO：

1. 邵逸夫-院内接口问题处理
2. 台州医院-登记管理-信息登记-校验-院内接口：知情同意书同步

## 7.02 周二 大雨

### TODO：

1. 毓璜顶漏洞修复、方案寻找
   * ICMP  timestamp请求响应漏洞
   * 允许Traceroute探测漏洞
   * nginx  缓冲区错误漏洞(CVE-2022-41741)
   * nginx  越界写入漏洞（CVE-2022-41742）
   * Elasticsearch 未授权访问【原理扫描】
2. 存储板样本库宕机重启
3. 台州项目更新
4. 邵逸夫-新增样本-组织耗材类型更改

### 收获：

1. 毓璜顶开发：admin admin123

## 7.03 周三 多云

### TODO：

1. 台州医院-信息登记-知情同意书，部署后发现与postman请求院内接口返回的xml不同；线上日志看来，返回了json格式数据
2. VM CentOS 7 模拟漏洞修复
   * ICMP  timestamp请求响应漏洞
   * 允许Traceroute探测漏洞
3. 毓璜顶漏洞修复、方案寻找
   * Elasticsearch 不受控制的资源消耗（CVE-2023-31418）选取方案为升级到 Elasticsearch 版本 7.17.13 

## 7.04 周四 晴

### TODO：

1. VM CentOS 7 模拟漏洞修复
   * nginx  缓冲区错误漏洞(CVE-2022-41741)
   * nginx  越界写入漏洞（CVE-2022-41742）选择升级nginx版本nginx-1.23.4

## 7.05 周五 晴转大雨

### TODO：

1. VM CentOS 7 模拟漏洞修复
   *  升级Elasticsearch 版本 7.17.13 版本测试
   *  ElasticSearch 数据库开启授权认证
2. 毓璜顶漏洞修复、方案寻找
   * 可通过HTTP获取远端WWW服务信息

## 7.06 周六 多云

### TODO：

1. VM CentOS 7 模拟漏洞修复
   * 可通过HTTP获取远端WWW服务信息

# 第二周

## 7.08 周一 多云

### TODO：

1. VM CentOS 7 模拟漏洞修复
   * iptables 白名单设置，保证项目端口运行

2. 待医院下班后进行邵逸夫的版本更新

## 7.09 周二 阴

### TODO：

1. 邵逸夫检索-术前治疗、乙肝情况-检索列失效
2. 汇总漏洞整治方案文档

## 7.10 周三 多云

### TODO：

1. 毓璜顶样本出库单管理-提交报错-线上问题处理
1. 邵逸夫-登记列表-任务列表-任务完成后状态未更新-数据运维
1. 邵逸夫-信息登记-his刷新时保存名称、身份证号、出生日期、住址、电话字段等脱敏字段
1. 待医院下班后，修复毓璜顶安全漏洞

## 7.11 周四 晴

### TODO：

1. 毓璜顶ElasticSearchConfig，增加密码验证
1. 下班后，开启毓璜顶ElasticSearch密码
1. 邵逸夫-前、后清场老数据运维修改

### 总结：

1. 邵逸夫漏洞修复主要升级了nginx至1.23.4
2. 修复了nginx的请求头泄露server问题，使用补丁headers-more-nginx-module-0.34.tar
3. 升级了elasticsearch至7.17.13
4. 设置elasticsearch密码验证

## 7.12 周五 阴

### TODO：

1. 杭州妇产-线上医嘱名称修改
1. 杭州妇产-数据运维-入库申请单-详情修改样本容量

## 收获：

1. idea快捷键ctrl + w，智能选区

2. 在使用Java 8中的Stream流和Lambda表达式时，通常不会比传统的for循环和forEach方式效率更低。实际上，使用Stream流和Lambda表达式可以提高代码的可读性和简洁性，同时利用并行处理提高性能。

   Stream流和Lambda表达式的内部实现会利用一些优化技术，例如惰性求值、短路操作、并行处理等，以提高性能。在某些情况下，Stream流甚至可以比传统的循环方式更高效，特别是在处理大量数据时。

   然而，在某些特定的情况下，如果使用不当，Stream流可能会比传统的循环方式效率略低。因此，在一些对性能要求极高的场景下，您可以根据具体情况选择合适的方法来处理数据。综合来说，Stream流和Lambda表达式的性能问题通常不是应该过分担心的主要问题，重点应该放在代码的可维护性和可读性上。

## 7.13 周六 多云

### TODO：

1. 线上邵逸夫版本更新

# 第三周

## 7.15 周一 多云转小雨

### TODO：

1. 单点登录测试-CDMO生产管理系统/账号模块
   * CDMO-未登录页签刷新后，会将登录页签的账号登出
   * 物料-菜单管理、角色管理无法读取菜单数据

## 7.16 周二 小雨

### TODO：

1. 单点登录测试-CDMO生产管理系统/样本制备、入库存储模块
   * CDMO-入库单管理，已出库的样本状态显示错误
2. 邵逸夫-his刷新时保存敏感字段，即使his返回为null，强制保存
3. 台州医院bug修复-深低温存储管理-异常结束的操作单手动结束

### 收获：

1. `mybatisPlus`使用`wrapper`进行数据字段的组装时，即使数据为`null`，也会进行存储

   ```java
   		// 点击刷新时，更新报错脱敏信息
   		HisPcaseInfo pcaseInfo = new HisPcaseInfo();
   		pcaseInfo.setPname(pcase.getPname());
   		pcaseInfo.setPcid(pcase.getPcid());
   		pcaseInfo.setPbirthday(pcase.getPbirthday());
   		pcaseInfo.setPaddress(pcase.getPaddress());
   		pcaseInfo.setPphone(pcase.getPphone());
   		this.update(pcaseInfo, Wrappers.<HisPcaseInfo>lambdaQuery().eq(HisPcaseInfo::getId, hisPcaseInfo.getId()));
   
   
   		// 点击刷新时，更新报错脱敏信息，即使his返回为null，强制保存
   		UpdateWrapper<HisPcaseInfo> updateWrapper = new UpdateWrapper<>();
   		updateWrapper.eq("id", hisPcaseInfo.getId())
   				.set("pname", pcase.getPname())
   				.set("pcid", pcase.getPcid())
   				.set("pbirthday", pcase.getPbirthday())
   				.set("paddress", pcase.getPaddress())
   				.set("pphone", pcase.getPphone());
   		this.update(updateWrapper);
   ```

## 7.17 周三 阴

### TODO：

1. 单点登录测试-CDMO生产管理系统/物料系统模块
   * 用管理员账号授权新用户权限，列表中无新用户信息

## 7.18 周四 阴

### TODO：

1. 线上问题邵逸夫-液体样本接收-无法接收。
   * 查询代码逻辑-通过标本条形码查询医嘱信息
   * 处理线上错误数据
2. 邵逸夫-登记管理-核对列表-同源样本的批量修改，存在异常-已存在检查报告,无法进行批次修改
3. 线上问题杭州妇产科-工单管理-临时工单-检查信息院内接口
4. 线上问题-邵逸夫-登记管理-已接受列表，医嘱流水号为空问题

## 7.19 周五 多云

### TODO：

1. 线上问题-邵逸夫-登记管理-医嘱流水号为空，日志打印设置

   ```json
   # http://localhost:8080/collect/transmitorder/newTransmitOrder
   
   {
     "orderNo": "ZYJJD20240720001",
     "receiveBy": "张陆敏",
     "temperature": "-80℃",
     "receiveLocation": "一号楼",
     "beforeState": "冷藏",
     "receiveTime": "2024-07-20 09:35:27",
     "infos": [
       {
         "sourceType": "2",
         "evaluation": "合格",
         "operName": "航内辅辅荧航治癌",
         "pdiagnose": "咽病",
         "barCode": "504718896039",
         "advContent": "组织医嘱",
         "researchProjectId": null,
         "sdrName": "雷刚",
         "ctName": "王娟",
         "startTime": "2024-07-20 09:34:14",
         "advType": "1",
         "remark": "",
         "id": "866976299833360384",
         "tempId": "1814473493703921666",
         "mrn": "20240719165148916",
         "orderNo": "866976299841748992",
         "hoscode": "A001",
         "hosname": "庆春院区",
         "deptin": "69",
         "deptinName": "肿瘤外科",
         "advCode": "PTH16.02",
         "orderFlag": "PTH",
         "orderFlagName": null,
         "validDay": 14,
         "endTime": "2024-08-03 09:34:14",
         "series": 6,
         "cbNum": 1,
         "dateLtsj": "2024-07-20 09:34:18",
         "patientName": "龚丽",
         "tysdm": "4042462",
         "sjbw": "咽",
         "receiveNFCause": null,
         "inVitroTime": "2017-12-25 15:10:25",
         "allocationTime": "1971-01-10 18:02:13",
         "transferBy": "马秀兰"
       },
       {
         "sourceType": "2",
         "evaluation": "合格",
         "operName": "腺根导助航治辅光光根航癌治根内光甲",
         "pdiagnose": "胃病",
         "barCode": "011289716963",
         "advContent": "组织医嘱",
         "researchProjectId": null,
         "sdrName": "宋强",
         "ctName": "戴霞",
         "startTime": "2024-07-20 09:33:57",
         "advType": "1",
         "remark": "",
         "id": "866976230056919040",
         "tempId": "1814473702416683009",
         "mrn": "20240719165148642",
         "orderNo": "866976230069501952",
         "hoscode": "A001",
         "hosname": "庆春院区",
         "deptin": "01",
         "deptinName": "入院准备中心",
         "advCode": "PTH16.02",
         "orderFlag": "PTH",
         "orderFlagName": null,
         "validDay": 14,
         "endTime": "2024-08-03 09:33:57",
         "series": 1,
         "cbNum": 1,
         "dateLtsj": "2024-07-20 09:34:01",
         "patientName": "黎敏",
         "tysdm": "4042462",
         "sjbw": "胃",
         "receiveNFCause": null,
         "inVitroTime": "2024-06-14 06:46:51",
         "allocationTime": "2016-10-10 17:51:27",
         "transferBy": "董涛"
       }
     ],
     "orderType": 2
   }
   ```

   

## 7.20 周六 小雨

### TODO：

1. 线上问题-邵逸夫-登记管理-医嘱流水号为空-api并发调用测试
1. 邵逸夫项目更新

# 第四周

## 7.22 周一 小雨

### TODO：

1. 
